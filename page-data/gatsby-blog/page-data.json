{"componentChunkName":"component---src-templates-blog-post-js","path":"/gatsby-blog/","result":{"data":{"site":{"siteMetadata":{"title":"xhlt"}},"markdownRemark":{"id":"a8adf585-25db-52b2-859a-5c28d96abcef","excerpt":"一、本地环境准备 1、WSL 2 （1）安装适用于 Linux 的 Windows 子系统 注意：\n1、Windows 10必须更新到版本 2004 的内部版本 19041 或更高版本\n2、必须在主板开启虚拟化支持 参考：\nhttps://docs.microsoft.com/zh-cn/windows/wsl…","html":"<h1>一、本地环境准备</h1>\n<h2>1、WSL 2</h2>\n<h3>（1）安装适用于 Linux 的 Windows 子系统</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\n\ndism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\n\nwsl --set-default-version 2</code></pre></div>\n<p>注意：\n1、Windows 10必须更新到版本 2004 的内部版本 19041 或更高版本\n2、必须在主板开启虚拟化支持</p>\n<p>参考：\n<a href=\"https://docs.microsoft.com/zh-cn/windows/wsl/install-win10\">https://docs.microsoft.com/zh-cn/windows/wsl/install-win10</a></p>\n<p><a href=\"https://docs.microsoft.com/zh-cn/windows/wsl/compare-versions\">https://docs.microsoft.com/zh-cn/windows/wsl/compare-versions</a></p>\n<h3>（2）WSL迁移（可选）</h3>\n<p>Windows 10的WSL系统默认安装到C盘，可以迁移至其他盘符。</p>\n<p>下载：<a href=\"https://github.com/DDoSolitary/LxRunOffline/releases\">https://github.com/DDoSolitary/LxRunOffline/releases</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">icacls D:\\Ubuntu.windows /grant &quot;admin:(OI)(CI)(F)&quot;\n.\\LxRunOffline.exe list\n.\\LxRunOffline.exe move -n Ubuntu -d D:\\Ubuntu.windows\\installed\\Ubuntu\n.\\LxRunOffline.exe get-dir -n Ubuntu</code></pre></div>\n<p>参考：\n<a href=\"https://blog.csdn.net/u013032345/article/details/103960743\">https://blog.csdn.net/u013032345/article/details/103960743</a></p>\n<p><a href=\"https://blog.csdn.net/starhosea/article/details/82624629\">https://blog.csdn.net/starhosea/article/details/82624629</a></p>\n<h2>2、npm和Gatsby安装</h2>\n<h3>（1）nvm安装</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.1/install.sh | bash\nnvm --version</code></pre></div>\n<p>参考：\n<a href=\"https://www.cnblogs.com/zhenqichai/p/npm-eacces-permission-error-fix.html\">https://www.cnblogs.com/zhenqichai/p/npm-eacces-permission-error-fix.html</a></p>\n<p><a href=\"https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally\">https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally</a></p>\n<p><a href=\"https://github.com/nvm-sh/nvm\">https://github.com/nvm-sh/nvm</a></p>\n<h3>（2）node安装</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node\nnvm install node</code></pre></div>\n<p>参考：\n<a href=\"https://www.npmjs.com/get-npm\">https://www.npmjs.com/get-npm</a></p>\n<h3>（3）cnpm安装</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm install -g cnpm --registry=https://registry.npm.taobao.org\nsudo ln -s /opt/node-v14.8.0-linux-x64/bin/cnpm /usr/local/bin/cnpm\ncnpm -v</code></pre></div>\n<p>参考：\n<a href=\"https://developer.aliyun.com/mirror/NPM?from=tnpm\">https://developer.aliyun.com/mirror/NPM?from=tnpm</a></p>\n<h3>（4）安装 Gatsby 命令行工具</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cnpm install -g gatsby-cli\ngatsby -v</code></pre></div>\n<p>参考：<a href=\"https://kalasearch.cn/blog/gatsby-blog-setup-tutorial-with-netlify/\">https://kalasearch.cn/blog/gatsby-blog-setup-tutorial-with-netlify/</a></p>\n<p><a href=\"https://cloud.tencent.com/developer/article/1602246\">https://cloud.tencent.com/developer/article/1602246</a></p>\n<p><a href=\"https://www.gatsbyjs.com/docs/gatsby-on-linux/\">https://www.gatsbyjs.com/docs/gatsby-on-linux/</a></p>\n<h1>二、安装Leonids</h1>\n<h2>1、环境准备</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo apt-get update\nsudo apt-get upgrade\nsudo apt-get install autoconf automake libtool\nsudo apt-get install libpng-dev\nsudo apt-get install libtiff5-dev libtiff5 libjbig-dev\nsudo apt-get install make\n\ntar zxvf nasm-2.14.02.tar.gz\n./configure\nmake\nsudo make install\nwhereis nasm</code></pre></div>\n<p>参考：\n<a href=\"https://www.cnblogs.com/chengmf/p/12526821.html\">https://www.cnblogs.com/chengmf/p/12526821.html</a></p>\n<h2>2、Leonids安装</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gatsby new my-blog https://github.com/renyuanz/leonids\ncd my-blog\ngatsby develop\ngatsby build\ngatsby serve</code></pre></div>\n<p>参考：\n<a href=\"https://www.gatsbyjs.com/docs/quick-start/\">https://www.gatsbyjs.com/docs/quick-start/</a></p>\n<p><a href=\"https://github.com/renyuanz/leonids\">https://github.com/renyuanz/leonids</a></p>\n<h1>三、部署和发布</h1>\n<h2>1、GitHub配置</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git config --global user.name &quot;admin&quot;\ngit config --global user.email &quot;admin@qq.com&quot;\nssh-keygen -t rsa -b 4096 -C &quot;admin@qq.com&quot;\neval $(ssh-agent -s)\nssh-add ~/.ssh/id_rsa\nvi ~/.ssh/id_rsa.pub\nssh -T git@github.com</code></pre></div>\n<p>参考：\n<a href=\"https://www.cnblogs.com/rhjeans/p/4798027.html\">https://www.cnblogs.com/rhjeans/p/4798027.html</a></p>\n<h2>2、安装 gh-pages</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd my-blog\nnpm install gh-pages --save-dev</code></pre></div>\n<h2>3、配置部署脚本</h2>\n<p>package.json文件配置：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&quot;scripts&quot;: {\n    &quot;build&quot;: &quot;gatsby build&quot;,\n    &quot;dev&quot;: &quot;gatsby develop&quot;,\n    &quot;format&quot;: &quot;prettier --write \\&quot;**/*.{js,jsx,json,md}\\&quot;&quot;,\n    &quot;start&quot;: &quot;npm run develop&quot;,\n    &quot;serve&quot;: &quot;gatsby serve&quot;,\n    &quot;clean&quot;: &quot;gatsby clean&quot;,\n    &quot;test&quot;: &quot;echo \\&quot;Write tests!\\&quot; &amp;&amp; exit 1&quot;,\n    &quot;deploy&quot;: &quot;gatsby build &amp;&amp; gh-pages -d public -b master&quot;\n  }</code></pre></div>\n<p>参考：\n<a href=\"https://zhuanlan.zhihu.com/p/101565299?utm_source=zhihu\">https://zhuanlan.zhihu.com/p/101565299?utm_source=zhihu</a></p>\n<p><a href=\"https://kalasearch.cn/blog/gatsby-blog-setup-tutorial-with-netlify/\">https://kalasearch.cn/blog/gatsby-blog-setup-tutorial-with-netlify/</a></p>\n<p><a href=\"https://www.gatsbyjs.com/docs/how-gatsby-works-with-github-pages\">https://www.gatsbyjs.com/docs/how-gatsby-works-with-github-pages</a></p>\n<h2>4、配置推送源码</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git remote add origin -t dev git@github.com:amdin/admin.github.io.git</code></pre></div>\n<h2>5、个人域名解析，配置CNAME</h2>\n<p>在static文件夹下创建文件CNAME，文件内容为个人主域名。</p>\n<p>参考：\n<a href=\"https://www.zhihu.com/question/31377141\">https://www.zhihu.com/question/31377141</a></p>\n<h2>6、发布</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run deploy</code></pre></div>","frontmatter":{"title":"通过Gatsby搭建个人博客-基于WSL 2","date":"August 20, 2020","description":"通过Gatsby搭建个人博客"}}},"pageContext":{"slug":"/gatsby-blog/","previous":{"fields":{"slug":"/code-highlighting-post/"},"frontmatter":{"title":"Syntax Highlighting Post"}},"next":null}},"staticQueryHashes":["1146911855","3000541721"]}